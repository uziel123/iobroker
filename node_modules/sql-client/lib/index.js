// Generated by CoffeeScript 1.10.0
(function() {
  var HOMEDIR, LIB, LIB_COV, LIB_DIR, conditional_sources, err, error, export_source_file, file, fs, i, j, len, len1, path, ref, required_module, sources;

  fs = require('fs');

  path = require('path');

  HOMEDIR = path.join(__dirname, '..');

  LIB_COV = path.join(HOMEDIR, 'lib-cov');

  LIB = path.join(HOMEDIR, 'lib');

  LIB_DIR = fs.existsSync(LIB_COV) ? LIB_COV : LIB;

  export_source_file = function(file) {
    var exported, i, k, len, p, ref, results, target, v;
    target = exports;
    if (Array.isArray(file)) {
      ref = file.slice(0, -1);
      for (i = 0, len = ref.length; i < len; i++) {
        p = ref[i];
        if (target[p] == null) {
          target[p] = {};
        }
        target = target[p];
        file = path.join.apply(path, file);
      }
    }
    exported = require(path.join(LIB_DIR, file));
    results = [];
    for (k in exported) {
      v = exported[k];
      results.push(target[k] = v);
    }
    return results;
  };

  sources = ['connection-factory', 'sql-client', 'sql-client-pool', 'sql-runner'];

  for (i = 0, len = sources.length; i < len; i++) {
    file = sources[i];
    export_source_file(file);
  }

  conditional_sources = [['pg', 'postgresql-client'], ['pg', ['bin', 'postgresql-runner']], ['mysql', 'mysql-client'], ['mysql', ['bin', 'mysql-runner']], ['sqlite3', 'sqlite3-client'], ['sqlite3', ['bin', 'sqlite3-runner']]];

  for (j = 0, len1 = conditional_sources.length; j < len1; j++) {
    ref = conditional_sources[j], required_module = ref[0], file = ref[1];
    try {
      require(required_module);
      export_source_file(file);
    } catch (error) {
      err = error;
    }
  }

}).call(this);
